<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Simple QR Scanner</title>
  <script src="https://cdn.jsdelivr.net/npm/@zxing/library@0.20.0"></script>
</head>
<body>
  <h2>QR Scanner Test</h2>
  <video id="preview" style="width:100%;max-width:400px;border:1px solid #ccc;" autoplay></video>
  <p><strong>Result:</strong> <span id="result">â€”</span></p>

  <script>
    const codeReader = new ZXing.BrowserMultiFormatReader();
    const video = document.getElementById('preview');
    const resultSpan = document.getElementById('result');

    async function startScanner() {
      try {
        const devices = await ZXing.BrowserCodeReader.listVideoInputDevices();
        const firstDeviceId = devices[0]?.deviceId;
        if (!firstDeviceId) {
          resultSpan.textContent = "No camera found.";
          return;
        }
        await codeReader.decodeFromVideoDevice(firstDeviceId, video, (res, err) => {
          if (res) {
            resultSpan.textContent = res.text;
          }
        });
      } catch (e) {
        resultSpan.textContent = "Error: " + e;
      }
    }

    startScanner();
  </script>
</body>
</html>
